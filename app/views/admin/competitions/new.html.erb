<h2>Nouveau concours</h2>

<% if @competition.errors.any? %>
  <div class="alert alert-danger alert-dismissible fade show auto-dismiss" role="alert">
    <h5>Erreur(s) :</h5>
    <ul>
      <% @competition.errors.full_messages.each do |msg| %>
        <li><%= msg %></li>
      <% end %>
    </ul>
  </div>
<% end %>

<%= form_with model: [:admin, @competition], local: true, html: { multipart: true } do |f| %>

  <!-- üì¶ Card : Informations g√©n√©rales -->
  <div class="card mb-4">
    <div class="card-header"><strong>Informations g√©n√©rales</strong></div>
    <div class="card-body">

      <div class="mb-3">
        <%= f.label :name, "Nom du concours" %>
        <%= f.text_field :name, class: "form-control" %>
      </div>

      <div class="mb-3">
        <%= f.label :location, "Lieu" %>
        <%= f.text_field :location, class: "form-control" %>
      </div>
      <div class="mb-3">
        <%= f.label :country, "Pays" %>
         <%= f.select :country, country_options, { selected: "BE" }, class: "form-select" %>
      </div>

      <div class="row mb-3">
        <div class="col"><%= f.label :start_date %><%= f.date_field :start_date, class: "form-control" %></div>
        <div class="col"><%= f.label :end_date %><%= f.date_field :end_date, class: "form-control" %></div>
      </div>

      <div class="mb-3">
        <%= f.label :timezone, "Fuseau horaire" %>
        <%= f.select :timezone, ActiveSupport::TimeZone.all.map(&:tzinfo).map(&:name).uniq.sort, {}, class: "form-select" %>
      </div>

      <div class="mb-3">
        <%= f.label :fei_id, "FEI ID" %>
        <%= f.text_field :fei_id, class: "form-control" %>
      </div>

      <div class="mb-3">
        <%= f.label :logo, "Logo du concours" %>
        <%= f.file_field :logo, class: "form-control" %>
      </div>

    </div>
  </div>

  <!-- üì¶ Card : Options d‚Äôactivation -->
  <div class="card mb-4">
    <div class="card-header"><strong>Options d‚Äôactivation</strong></div>
    <div class="card-body">

      <div class="form-check form-switch mb-3">
        <%= f.check_box :public_enabled, class: "form-check-input" %>
        <%= f.label :public_enabled, "Afficher sur la page publique", class: "form-check-label" %>
      </div>

      <div class="form-check form-switch mb-3">
        <%= f.check_box :rabbitmq_enabled, class: "form-check-input" %>
        <%= f.label :rabbitmq_enabled, "Envoyer vers RabbitMQ", class: "form-check-label" %>
      </div>

    </div>
  </div>

  <!-- üì¶ Card : Informations FTP -->
  <div class="card mb-4">
    <div class="card-header"><strong>Informations FTP</strong></div>
    <div class="card-body">

      <div class="form-check form-switch mb-2">
        <%= f.check_box :ftp_enabled, class: "form-check-input" %>
        <%= f.label :ftp_enabled, "Activer FTP", class: "form-check-label" %>
      </div>

      <div class="row mb-3">
        <div class="col"><%= f.label :ftp_host %><%= f.text_field :ftp_host, class: "form-control" %></div>
        <div class="col"><%= f.label :ftp_port %><%= f.number_field :ftp_port, class: "form-control" %></div>
      </div>
      <div class="row mb-3">
        <div class="col"><%= f.label :ftp_user %><%= f.text_field :ftp_user, class: "form-control" %></div>
        <div class="col"><%= f.label :ftp_password %><%= f.password_field :ftp_password, class: "form-control" %></div>
      </div>
      <div class="mb-3">
        <%= f.label :ftp_path, "Chemin distant" %>
        <%= f.text_field :ftp_path, class: "form-control" %>
      </div>

    </div>
  </div>

  <!-- üì¶ Card : Informations S3 -->
  <div class="card mb-4">
    <div class="card-header"><strong>Informations S3</strong></div>
    <div class="card-body">

      <div class="form-check form-switch mb-2">
        <%= f.check_box :s3_enabled, class: "form-check-input" %>
        <%= f.label :s3_enabled, "Activer S3", class: "form-check-label" %>
      </div>

      <div class="mb-3">
        <%= f.label :s3_bucket %><%= f.text_field :s3_bucket, class: "form-control" %>
      </div>
      <div class="mb-3">
        <%= f.label :s3_region %><%= f.text_field :s3_region, class: "form-control" %>
      </div>
      <div class="mb-3">
        <%= f.label :s3_access_key %><%= f.text_field :s3_access_key, class: "form-control" %>
      </div>
      <div class="mb-3">
        <%= f.label :s3_secret_key %><%= f.password_field :s3_secret_key, class: "form-control" %>
      </div>

    </div>
  </div>

  <!-- Bouton -->
  <%= f.submit "Cr√©er le concours", class: "btn btn-success mb-4" %>

<% end %>
