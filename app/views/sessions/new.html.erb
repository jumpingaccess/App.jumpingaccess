<!-- app/views/sessions/new.html.erb -->

<div class="container mt-5" style="max-width: 500px;">
  <% if flash[:alert] %>
    <div class="alert alert-danger alert-dismissible fade show" role="alert">
      <strong>Erreur :</strong> <%= flash[:alert] %>
      <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
    </div>
  <% end %>

      <% if flash[:notice] %>
        <div class="alert alert-success alert-dismissible fade show auto-dismiss" role="alert">
          <%= flash[:notice] %>
        </div>
      <% end %>

      <% if flash[:alert] %>
        <div class="alert alert-danger alert-dismissible fade show auto-dismiss" role="alert">
          <%= flash[:alert] %>
        </div>
      <% end %>

  <div class="card shadow">
    <div class="card-body">
      <h1 class="card-title h4 mb-4">Connexion</h1>

      <%= form_with url: login_path, method: :post, local: true do |f| %>
        <div class="mb-3">
          <%= f.label :email, class: "form-label" %>
          <%= f.email_field :email, class: "form-control" %>
        </div>
        <div class="mb-3">
          <%= f.label :password, class: "form-label" %>
          <%= f.password_field :password, class: "form-control" %>
        </div>
        <%= f.submit "Connexion", class: "btn btn-primary w-100" %>
      <% end %>

      <div class="mt-3 text-center">
        <%= link_to "Mot de passe oublié ?", new_password_reset_path, class: "link-secondary small" %>

      </div>
    </div>
  </div>
</div>
    <!-- ✅ Script pour auto-fermer les alertes après 3 secondes -->
<script>
  document.addEventListener("turbo:load", function () {
    setTimeout(function () {
      document.querySelectorAll('.auto-dismiss').forEach(function (el) {
        el.classList.remove('show'); // déclenche l'animation Bootstrap
        setTimeout(() => el.remove(), 200); // suppression après animation
      });
    }, 3000); // 3 secondes d'affichage
  });
</script>